<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
<h1>
    <a href="users.html">Person</a>
</h1>


<script>

   /* let userName = new URL(location.href).searchParams.get('name');
    console.log(userName);

    let baseURL = 'http://jsonplaceholder.typicode.com/users/' + userName;
    /!*console.log(baseURL);*!/

        fetch(baseURL).then(res => res.json())
            .then(value => {
                console.log(value);

                let div = document.createElement('div');
                document.body.appendChild(div);

                for (const valueKey in value) {
                    /!*console.log(valueKey, value[valueKey])*!/

                    if (valueKey === 'address' || valueKey === 'company') {

                        for (const key in value[valueKey]) {
                            let userBlock = document.createElement('div');
                            div.appendChild(userBlock);
                            userBlock.innerText = `${key} - ${value[valueKey][key]}`
                            console.log(value[valueKey].geo)
                        }

                    } else {
                        let div2 = document.createElement('div');
                        div.appendChild(div2);
                        div2.innerText = `${valueKey} - ${value[valueKey]}`
                    }

                }

            });*/


   const userNewUrl = new URLSearchParams(window.location.search);
   const baseUrl = userNewUrl.get('id');

   fetch(`https://jsonplaceholder.typicode.com/users/${baseUrl}`)
       .then(res => res.json())
       .then(value => {
           for (const valueKey in value) {
               console.log(valueKey)
               let div = document.createElement('div');
               if (typeof value[valueKey] !== 'object') {
                   div.innerText = `${valueKey}: ${value[valueKey]}`
               } else {
                   div.innerText = `${valueKey}:`;

                   for (const key in value[valueKey]) {
                       let block = document.createElement('div');
                       if (typeof value[valueKey] [key] !== 'object') {
                           block.innerText = `${key}: ${value[valueKey] [key]}`;
                       } else {
                           block.innerText = `${key}:`

                           for (const elementKey in value[valueKey] [key]) {

                               let element = document.createElement('div');

                               if (typeof value[valueKey][key][elementKey] !== 'object') {
                                   element.innerText = `${elementKey}: ${value[valueKey][key][elementKey]}`
                               }
                               block.appendChild(element);
                           }
                       }
                       div.appendChild(block);
                   }
               }


               document.body.appendChild(div)
           }


       })


   console.log(location.href);



</script>

</body>
</html>